# Flask Docker Stack

Пример готовой инфраструктуры веб-приложения на базе **Flask**, работающего в связке с **Redis** и **PostgreSQL**. Проект полностью контейнеризирован с помощью Docker и Docker Compose.

## Функционал

Приложение представляет собой счетчик посещений, который демонстрирует взаимодействие трех сервисов:
1.  **Web (Flask)** принимает запросы, инкрементирует счетчик в Redis и сохраняет запись о визите в PostgreSQL.
2.  **Redis** используется как быстрый кэш для счетчика просмотров ("Hits").
3.  **PostgreSQL** используется для постоянного хранения истории визитов.

**Особенности реализации:**
*   Автоматическое ожидание готовности БД (Retry logic в Python).
*   Настроенные `Healthcheck` для сервисов.
*   Ограничение ресурсов (CPU/RAM) для контейнеров.
*   Использование легковесных образов (Alpine Linux).

## Технологический стек

*   **Python 3.11** (Alpine)
*   **Flask**
*   **Redis 7** (Alpine)
*   **PostgreSQL 15** (Alpine)
*   **Docker Compose**

## Установка и запуск

### 1. Клонирование репозитория
```bash
git clone https://github.com/your-username/docker-compose-flask-stack.git
cd docker-compose-flask-stack
```

### 2. Настройка переменных окружения
В файле docker-compose.yml используются переменные окружения. Создайте файл .env в корне проекта и добавьте туда следующие настройки:
```bash
# Настройки веб-сервера
WEB_PORT=5000

# Настройки Redis
REDIS_PORT=6379

# Настройки PostgreSQL
POSTGRES_USER=postgres
POSTGRES_PASSWORD=mysecretpassword
POSTGRES_DB=flask_db
```

### 3. Запуск контейнеров
Соберите и запустите приложение в фоновом режиме:
```bash
docker-compose up -d --build
```

После запуска приложение будет доступно по адресу: http://localhost:5000 (или на порту, который вы указали в WEB_PORT).

### 4. Остановка
Чтобы остановить контейнеры и удалить созданные сети:
```bash
docker-compose down
```
